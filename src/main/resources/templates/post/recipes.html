<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/default}">

<main layout:fragment="contents" class="recipes">

	<div id="wrap" class="main-body">

		<div class="recipesthym" th:each="postDto : ${postDto}">

			<section class="recipes-info-left">

				<article class="myrecipe">

					<img class="menu-pic" th:src="${postDto.imagePath}" alt="ì™„ì„± ìŒì‹" width="100px">

					<h2 class="menu-title" th:text="${postDto.title}"></h2>

					<p class="description" th:text="${postDto.content}"></p>

					<div class="steps">
						<h3>ğŸ½ ìš”ë¦¬ ìˆœì„œ</h3>
						<div th:each="step : ${postDto.stepList}" class="step-box"
							style="margin-bottom: 32px;">
							<h4 th:text="'STEP ' + ${step.stepNumber}"></h4>
							<img th:src="${step.imagePath}" alt="ë‹¨ê³„ ì´ë¯¸ì§€"
								style="width: 100%; max-width: 500px; height: auto; border-radius: 8px; margin-bottom: 16px;" />
							<p th:text="${step.content}" style="font-size: 18px;"></p>
						</div>
					</div>

				</article>

			</section>

			<div class="recipes-info-right">

				<div class="ingredients">
					<h4>ğŸ³ ì¬ë£Œ ëª©ë¡</h4>
					<div th:each="ingredient : ${postDto.ingredientList}"
						class="ingredient-box">
						<img th:src="${ingredient.imagePath}" alt="ì¬ë£Œ ì´ë¯¸ì§€">
						<div>
							<span th:text="${ingredient.ingredientName}">ì¬ë£Œëª…</span> - <span
								th:text="${ingredient.ingredientAmount}">ìˆ˜ëŸ‰</span>
						</div>
					</div>
				</div>

			</div>
		</div>
		
	</div>

		<div class="icons d-flex justify-content-start align-items-center">

			<i th:unless="${postDto.liked}" class="bi bi-heart text-danger heartIcon" th:data-post-id="${postDto.id}"></i>
			<i th:if="${postDto.liked}" class="bi bi-heart-fill text-danger heartIcon" th:data-post-id="${postDto.id}"></i>
			<span th:text="${postDto.likeCount}"></span>
			
			<input type="text" class="form-control col-10" placeholder="ëŒ“ê¸€ì„ ë“±ë¡ í•´ì£¼ì„¸ìš”">
			<!-- ëŒ“ê¸€ ì…ë ¥ ajax ë³´ë‚´ê¸° -->
			<button type="button" class="form-control col-1">ë“±ë¡</button>
			<!-- ëŒ“ê¸€ ì…ë ¥ ajax ë³´ë‚´ê¸° -->
		</div>
		
		<div class="">
			<div>ì‚¬ìš©ì1 : ì •ë§ ìµœê³ ì—ìš” </div>
			<div>ì‚¬ìš©ì2 : ì—­ì‹œë‚˜		</div>	
			<div>ì‚¬ìš©ì3 : ì •ë§ ì›©ì´ì—ìš” </div>
			<div>ì‚¬ìš©ì4 : ì¡´ì‹œë‚˜		</div>	
		</div>
</main>

<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<script layout:fragment="script">

	$(".heartIcon").on("click", function() {
		
	     let postId = $(this).data("post-id");

		$.ajax({
			type : "post",
			url : "/post/like",
			data : {
				"postId" : postId
			},
			success : function(response) {
				if (response.result == "success") {
					location.reload();
				} else {
					alert("ì¢‹ì•„ìš” ì‹¤íŒ¨!!!");
				}
			},
			error : function() {
				alert("ì¢‹ì•„ìš” ì• ëŸ¬!!!");
			}
		});
	});
</script>
</html>